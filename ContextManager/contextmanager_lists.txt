ContextManager lists
------------------------------

Purpose variable chat manager, nice API, other contexts too.

FEATURES
----------------------------
- PermissionsEx prefixes with respecting groups weights.
- Set recipients for chat, ignore players, chat channels, tell shortcut...
- mcMMO party chat support
- Annoucements with ! (channel wide) and !! global also out of mcMMO party chat
- Region finder
- ChestShop finder.

COMMANDS
----------------------------

Normal chat:
* @ <player> ....<message>... | @<player> ...<message>...
    Like tell.
    
Administrative chat:
* !...
    Channel wide announcement.
    contextmanager.chat.announce
* !!....
    Global announcement
    contextmanager.chat.announce

Normal Context commands:
* context ...
    aliases: cx
    Various sub commands for managing or setting contexts.
    For most sub commands there are shorter verions,
    like rec or even r for recipients.

* cx ignore ...
    Aliases: cxign
    Ignore players chat.
    Add the player names, to remove a single player add a "-",
    like: /cxign -Notch 
    
* cx recipients ...
    Aliases: cxr
    Add recipients of chat, only these people can hear you,
    you can only hear them, they might hear others.
    If you have permission for /cx greedy , then you can use that
     to still here the normal chat.
    Add names of players, or -<name> to remove one single player,
    like: /cxr -Notch
    
* cx channel
    Show available chat channels.
* cx channel <channle name>
    Aliases: cxc
    Switch to the chat chanel.
    You can only hear others inside of the channel, and vice versa.
    You can still hear other channels if you have /cx greedy !

* cx greedy | cx greedy channel
    Still get chat of other channels even if in /cxr mode or 
     in another channel.
    contextmanager.cmd.greedy
    contextmanager.greedy.default
    contextmanager.greedy.channel
    contextmanager.greedy.party
    contextmanager.greedy.private
        
* cx reset
    Aliases: cx clear | cx cl | cxcl
    Reset contexts such as channels and recipients 
* cx reset all
    Aliases: see cx reset
    Reset contexts and ignored players.
* cx reset recipients
    Aliases: see cx reset
    Reset recipients.
* cx reset channel
    Reset channel to default.
* cx reset ignore
    Reset ignored players
    
* cx find ...
    Aliases: cx f ...
    Find stuff, this is the general shortcut which will delegate  
     to all available services.
    it will work for regions and for items (ChestShop).
    However there is permission setup necessary, or configuration to make these work!
 
Region service:
* cx region find <region name>
You can always use this to find regions youre owner or member of.
    regions.find.w.<world>.r.<region>
    Abbreviate for a world: regions.find.w.<world>.*
    Use lower case world and region names for permissions!
 
ChestShop service:
* cx shop <region name or item name>
    Show items and prices of recently bought or sold stuff.
    Or show which shops sell  or buy it.
* cx shopp info <region name>
    Show items (...).
* cx shop find <item>
    Show regions that sell the items
* cx shop find <region name>
    Show distance to shop, should work for all shops that match the fiters.

Administrative context commands:
* cx history | cx history <number>
    Shortcut: cx h ...
    Show chat history (last 50 or number ... number + 50).
    contextmanager.admin.cmd.history
    contextmanager.history.display.channel
    contextmanager.history.display.default
    contextmanager.history.display.private
    contextmanager.history.display.party
* cx services
    Show available mix-in in services (ChestShop, region finding). 
    
Administrative commands:
* cmreload 
    Reload configuration (s).
    contextmanager.admin.cmd.reload
* mute <player> | mute <player> <minutes>
    contextmanager.admin.cmd.mute
* unmute <player>
    contextmanager.admin.cmd.unmute
* muted
    List of muted players.
    contextmanager.admin.cmd.muted


OTHER PERMISSIONS
----------------------------

CONFIGURATION
----------------------------


STACK
------------------

- !(add) permissions for muting "newbies" + interfacing for playing time
- !(add) custom context to define what to hear + /cx reset
- !(add) replace tell for the case of offline or hidden players or players that ignore the telling player
- !(add) /ignore command (player, *)

!(add) Tag for global shout ?

record + cx inspect ?

!(add) hear all switch ? 
! replace global by a preset or even configurable name !

!(add) World aliases (translate just the format part)
!(add) Map context to integers ! For fastest comparison !

! (add) context all (hear all, speak to all)
! (add) context world ! [for mods: also other worlds! ]
! (add) context with [to switch to the same context]


! (add) context channel [with permissions!, from config]



! (add) Message on empty recipients !


! (add) mute for a certain context !


***
- ! add better party details on history, maybe list recipients


- !(add) cx with ?

- ? add silent flag ?
- ? greedy flag ?
- ! say (server) log it
***

! group invitations ?

! add flag for: listen to party, private but not to main chatter
! add history -> browser ? + certain types only (not tell for instance)


! (add) ping player [+ deactivatable] + ping mods or so
! keep track of mods and make them pingable (cx mod) + ping task (permission => ping)
! warn on new players 

! listening instead of players (channel info)
! add greedy chat -> hear all channels

? (add) permission for getting heard from channels out


? prefixing concept =? your name mentioned ...

! subscribe feature for channels (different types: announcement, region dependent announcement, distance-dependent announcements) maybe schedule message with random delay.


! (add) greedy for tell too ? TODO: Use extra ENUM for greedy ! (small-channel, all_channels, private, tell , etc.)

!(add) Better context handling: keep sets with players that are in certain channels and for greedy, so that getting the players can be made much faster.


*** 

* FUTURE:
- ?(refactor) For use without regions at all ?

* OPT:
- !(add) ChestShop: even more colors !
- !(add) CommandAliasMapper (for convenient setup with a String[][] presets)

* FEATURE:
?(add) ChestShop3: only process valid transactions ?
!(add) option to add admin shops
- ?(add) AccessMap3d for shop positions -> shop list return Set of shops within 50 blocks?
- !(add) Shopfinder: +add statistics or reliability values.

* MANAGEMENT:


!(add) option to test if shops really exist on chunkload (older than xy shops).
!(add) exclude-filter option (exclude region from adding).


*** 


***

? (add) Player prefixing + online list service.

!(add) greedy: channel+default vs ALL_CHANNELS 

***
- ? add onReload for hooks ?
- ?(add) recheck data command ?
- ?(add) Browsing functionality to contextmanager ?
- !(add) commands to manage adding filters (shop)

? (add) BlockBreak: signs

?(add) region finder ServiceHook for regions that one is owner or member of.

?(add) Conversations with history ? or channel history 


!(add) Browser central !

****

!(add) mild unmute perm


? add: staff calls (+ location) + tp ther ?



***

ChestShop: Out of stock / chest full problem: ? expiration for shops (7das or so ).




VERSION HISTORY
-----------------------------------

(0.11.2)
- (bugfix) npe in onEnable
- (add) Some doc in lists.

(0.11.1)
- (adjust) Made some things final in ChestShopHook. [Keep old method!]

(0.11.0)
- (add) Option to ignore visibility (ignore-cansee).

(0.10.5)
- (adjust) plshared

(0.10.4)
- (bugfix) Don't count players that can't be seen by chat sender as recipients officially.

(0.10.3)
- (adjust) To latest mcMMO API.

(0.10.2)
- (adjust) To ChestShop changes.
- (adjust) To mcMMO changes.

(0.10.1)
- (bugfix) NPE on tell.

(0.10.0)
- (add) NWSEUD spec for region finding.
- (add) delegateFind for chestshop hook.
- (add) Infrastructure for /cx find to deleagte to service hooks.

(0.9.1)
- (adjust) ... changed ChestShop API
- (adjust) ... changed mcMMo API.

(0.9.0)
- (add) ChestShop3: Check chests for space / stock. More flexible command handling.

(0.8.2)
- (bugfix) Show number of regions in general info .

(0.8.1)
- (add) ChestShop3: Exclude "wrong clicks" (which button)
- (add) ChestShop3: long name support.

(0.8.0)
- (add) shop hook: save + reload + clear (settings, data)
- (add) Display nuber of shop regions
- (add) /cx services
- (add) ChestShop3: Shortcut for list, more flexible command interpretation.
- (add) ChestShop3: Sorted price display, pre calculate string.
- (bugfix) ChestShop3: make price display relative to one item.

(0.7.1)
- (bugfix) ChestShop3: Removing signs
 
(0.7.0)
- (add) Saving / loading for Chestshop3 hook.
- (refactor) Refine ServiceHook architecture.

(0.6.1)
- (refactor) Allow /cx history from the console, call ServiceHooks after checking for normal commands.
- (adjust) Some messages / color for items.
- (bugfix) remove debug message

(0.6.0)
- (add) Simple ChesShop hook
- (add) Simple ServiceHook architecture.
- (refactor) Set up some internal package structure (Split off code to different classes...).

(0.5.1)
- (adjust) /cx greedy: allow to reset with args always (no uneecessary clearing). + adjust description

(0.5.0)
- (add) /cx greedy
- (adjust) history: message color to white.
- (add) warn on empty recipients [TODO: maybe limit number of messages, or add to ping messsages -> msg + expiration timestamp, generic]


(0.4.4)
- (adjust) Tell message.
- (adjust) Channel info now shows number of players in the channel.

(0.4.3)
- (bugix) Do fix default channel name and allow an empty one, still display default on infos but not in chat if empty.

(0.4.2)
- (bugfix) channels display
- (adjust) Message / contet descr. appearance.

(0.4.1)
- (bugfix) remove invalid channels on reload.
- (bugfix) history: decrement index when too high !

(0.4.0)
- (add) shortcut commands for context ...
- (add) Chat history + viewing.
- (bugfix) Local shout is always channel wide (also from party chat or if recipients are set).
- (add) Contexts: channels , recipients
- (add) Replace tell completely + @ <player> shortcut.
- (add) canHear method in PlayerData.
- (add) bypass permission for ignore and canSee on tell

(0.3.0)
- (add) Ignore feature.
- (add) Reflect message to player and log, for tell.
- (add) Prevent commands features for muted.
- (bugfix) Prevent /me for muted.

(0.2.0)
- (add) Message color for party chat.
- (bugfix) Announcing globally when in party chat. 

(0.1.2)
- (bugfix) Do not handle cancelled events.

(0.1.1)
- (bugfix) adjust to new mcmmo party api.

(0.1.0)
- (add) /mute player [minutes] / TODO: mute oncerning contexts !

(0.0.0)